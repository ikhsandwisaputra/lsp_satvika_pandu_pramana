<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- ========== SNIPPET TEMPLATE: Certification Level Selection ========== -->
    <template id="s_certification_level" name="Certification Level Selection">
        <section class="s_certification_level pt-5 pb-5" style="background-color: #f6f7f8;">
            <div class="container">
                <!-- Page Heading -->
                <div class="row justify-content-center mb-4">
                    <div class="col-lg-8 text-center">
                        <h2 class="h1 fw-bold mb-3" style="color: #1e293b; font-size: 2.5rem;">Pilih Level Sertifikasi</h2>
                        <p class="text-muted fs-5">
                            Pilih grade yang sesuai dengan kualifikasi dan pengalaman Anda untuk melanjutkan proses sertifikasi.
                        </p>
                    </div>
                </div>

                <!-- Info Banner: Selected Certification Type -->
                <div class="row justify-content-center mb-4">
                    <div class="col-lg-8">
                        <div id="certTypeBanner" class="bg-white rounded-3 p-3 shadow-sm d-flex align-items-center gap-3" style="border: 1px solid #e2e8f0;">
                            <div class="rounded-circle d-flex align-items-center justify-content-center flex-shrink-0" id="certTypeIcon" style="width: 48px; height: 48px; background-color: rgba(19, 127, 236, 0.1);">
                                <i class="fa fa-graduation-cap" style="color: #137fec; font-size: 1.25rem;"></i>
                            </div>
                            <div>
                                <p class="text-muted small mb-0">Jenis Sertifikasi yang Dipilih:</p>
                                <p id="certTypeText" class="fw-bold mb-0" style="color: #1e293b; font-size: 1.1rem;">Sertifikasi Baru</p>
                            </div>
                            <a href="/pengajuan-sertifikasi" class="ms-auto btn btn-sm btn-outline-secondary">
                                <i class="fa fa-pencil me-1"></i>Ubah
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Selection Cards -->
                <div class="row justify-content-center g-4">
                    <!-- Card 1: Grade 1.0 - Entry Level -->
                    <div class="col-lg-5 col-md-6">
                        <div class="s_cert_level_card h-100 bg-white rounded-4 shadow-sm overflow-hidden" style="border: 1px solid #e2e8f0;">
                            <div class="p-4 pb-3">
                                <h3 class="h4 fw-bold mb-2" style="color: #1e293b;">Coating Inspector Grade 1.0</h3>
                                <p class="fw-medium mb-3" style="color: #137fec;">Entry Level</p>
                                <p class="text-muted small mb-0">
                                    Cocok untuk individu yang baru memulai karir di bidang inspeksi coating. Mencakup dasar-dasar dan teknik inspeksi fundamental.
                                </p>
                            </div>
                            
                            <div class="p-4 pt-0">
                                <div class="pt-4 border-top" style="border-color: #f1f5f9 !important;">
                                    <h4 class="text-uppercase fw-semibold mb-3" style="font-size: 0.7rem; letter-spacing: 1.5px; color: #64748b;">Berkas Persyaratan</h4>
                                    <ul class="list-unstyled mb-4">
                                        <li class="d-flex align-items-center gap-2 mb-3">
                                            <span class="rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 20px; height: 20px; background-color: #137fec;">
                                                <i class="fa fa-check text-white" style="font-size: 9px;"></i>
                                            </span>
                                            <span class="small" style="color: #334155;">Pas Foto 3x4 (Background Merah)</span>
                                        </li>
                                        <li class="d-flex align-items-center gap-2 mb-3">
                                            <span class="rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 20px; height: 20px; background-color: #137fec;">
                                                <i class="fa fa-check text-white" style="font-size: 9px;"></i>
                                            </span>
                                            <span class="small" style="color: #334155;">Kartu Tanda Penduduk (KTP)</span>
                                        </li>
                                        <li class="d-flex align-items-center gap-2 mb-3">
                                            <span class="rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 20px; height: 20px; background-color: #137fec;">
                                                <i class="fa fa-check text-white" style="font-size: 9px;"></i>
                                            </span>
                                            <span class="small" style="color: #334155;">Curriculum Vitae (CV) Terbaru</span>
                                        </li>
                                        <li class="d-flex align-items-center gap-2">
                                            <span class="rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 20px; height: 20px; background-color: #137fec;">
                                                <i class="fa fa-check text-white" style="font-size: 9px;"></i>
                                            </span>
                                            <span class="small" style="color: #334155;">Ijazah Pendidikan Terakhir</span>
                                        </li>
                                    </ul>
                                </div>
                                
                                <a href="#" class="s_cert_register_btn btn w-100 py-3 rounded-3 fw-bold d-flex align-items-center justify-content-center gap-2" data-level="level1" style="background-color: #137fec; border-color: #137fec; color: white;">
                                    <span>Daftar Sekarang</span>
                                    <i class="fa fa-arrow-right"></i>
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Card 2: Grade 2.0 - Professional Level -->
                    <div class="col-lg-5 col-md-6">
                        <div class="s_cert_level_card h-100 bg-white rounded-4 shadow-sm overflow-hidden" style="border: 1px solid #e2e8f0;">
                            <div class="p-4 pb-3">
                                <h3 class="h4 fw-bold mb-2" style="color: #1e293b;">Coating Inspector Grade 2.0</h3>
                                <p class="fw-medium mb-3" style="color: #137fec;">Professional Level</p>
                                <p class="text-muted small mb-0">
                                    Sertifikasi lanjutan untuk inspektor berpengalaman. Fokus pada teknik spesialis, analisis kegagalan, dan kepemimpinan tim.
                                </p>
                            </div>
                            
                            <div class="p-4 pt-0">
                                <div class="pt-4 border-top" style="border-color: #f1f5f9 !important;">
                                    <h4 class="text-uppercase fw-semibold mb-3" style="font-size: 0.7rem; letter-spacing: 1.5px; color: #64748b;">Berkas Persyaratan</h4>
                                    <ul class="list-unstyled mb-4">
                                        <li class="d-flex align-items-center gap-2 mb-3">
                                            <span class="rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 20px; height: 20px; background-color: #137fec;">
                                                <i class="fa fa-check text-white" style="font-size: 9px;"></i>
                                            </span>
                                            <span class="small" style="color: #334155;">Pas Foto 3x4 (Background Merah)</span>
                                        </li>
                                        <li class="d-flex align-items-center gap-2 mb-3">
                                            <span class="rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 20px; height: 20px; background-color: #137fec;">
                                                <i class="fa fa-check text-white" style="font-size: 9px;"></i>
                                            </span>
                                            <span class="small" style="color: #334155;">Kartu Tanda Penduduk (KTP)</span>
                                        </li>
                                        <li class="d-flex align-items-center gap-2 mb-3">
                                            <span class="rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 20px; height: 20px; background-color: #137fec;">
                                                <i class="fa fa-check text-white" style="font-size: 9px;"></i>
                                            </span>
                                            <span class="small" style="color: #334155;">Curriculum Vitae (CV) Terbaru</span>
                                        </li>
                                        <li class="d-flex align-items-center gap-2 mb-3">
                                            <span class="rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 20px; height: 20px; background-color: #137fec;">
                                                <i class="fa fa-check text-white" style="font-size: 9px;"></i>
                                            </span>
                                            <span class="small" style="color: #334155;">Ijazah Pendidikan Terakhir</span>
                                        </li>
                                        <!-- Additional Requirements for Grade 2.0 -->
                                        <li class="d-flex align-items-center gap-2 mb-3">
                                            <span class="rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 20px; height: 20px; background-color: #137fec;">
                                                <i class="fa fa-shield text-white" style="font-size: 9px;"></i>
                                            </span>
                                            <span class="small fw-semibold" style="color: #1e293b;">Sertifikat Grade 1.0 (Valid)</span>
                                        </li>
                                        <li class="d-flex align-items-center gap-2">
                                            <span class="rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 20px; height: 20px; background-color: #137fec;">
                                                <i class="fa fa-shield text-white" style="font-size: 9px;"></i>
                                            </span>
                                            <span class="small fw-semibold" style="color: #1e293b;">Logbook Experience (Min. 2 Tahun)</span>
                                        </li>
                                    </ul>
                                </div>
                                
                                <a href="#" class="s_cert_register_btn btn w-100 py-3 rounded-3 fw-bold d-flex align-items-center justify-content-center gap-2" data-level="level2" style="background-color: #137fec; border-color: #137fec; color: white;">
                                    <span>Daftar Sekarang</span>
                                    <i class="fa fa-arrow-right"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- JavaScript untuk handle URL params -->
            <script type="text/javascript">
                document.addEventListener('DOMContentLoaded', function() {
                    // Initialize halaman langsung (redirect ditangani oleh controller)
                    initLevelPage();
                    
                    function initLevelPage() {
                        // Get certification type from URL parameter
                        var urlParams = new URLSearchParams(window.location.search);
                        var certType = urlParams.get('type') || 'new';
                    
                        // Update banner based on type
                        var certTypeText = document.getElementById('certTypeText');
                        var certTypeIcon = document.getElementById('certTypeIcon');
                        
                        if (certType === 'recert') {
                            if (certTypeText) {
                                certTypeText.textContent = 'Resertifikasi / Perpanjangan';
                            }
                            if (certTypeIcon) {
                                certTypeIcon.style.backgroundColor = 'rgba(16, 185, 129, 0.1)';
                                certTypeIcon.innerHTML = '';
                                var icon = document.createElement('i');
                                icon.className = 'fa fa-refresh';
                                icon.style.color = '#10b981';
                                icon.style.fontSize = '1.25rem';
                                certTypeIcon.appendChild(icon);
                            }
                        } else {
                            if (certTypeText) {
                                certTypeText.textContent = 'Sertifikasi Baru';
                            }
                        }
                        
                        // Handle register button click
                        var registerBtns = document.querySelectorAll('.s_cert_register_btn');
                        registerBtns.forEach(function(btn) {
                            btn.addEventListener('click', function(e) {
                                e.preventDefault();
                                
                                // Get level from button data attribute
                                var certLevel = this.getAttribute('data-level');
                                
                                // Redirect ke signup dengan parameter type dan level
                                window.location.href = '/certification/signup?type=' + certType + String.fromCharCode(38) + 'level=' + certLevel;
                            });
                        });
                    }
                });
            </script>
        </section>
    </template>

    <!-- ========== REGISTER SNIPPET TO WEBSITE BUILDER ========== -->
    <template id="certification_level_snippet" inherit_id="website.snippets" name="Certification Level Snippet">
        <xpath expr="//snippets[@id='snippet_structure']" position="inside">
            <t t-snippet="iso17024_portall.s_certification_level" 
               t-thumbnail="/iso17024_portall/static/src/img/snippets/s_certification_level.png"/>
        </xpath>
    </template>
    
</odoo>
